# HTTPS-2 - 对称加密与非对称加密

加密：把消息用某种方式转换成谁也看不懂的乱码，只有掌握特殊“钥匙”的人才能再转换出原始文本。

> 这里的“钥匙”就叫做“密钥”（key）
>
> 加密前的消息叫“明文”（plain text/clear text）
>
> 加密后的乱码叫“密文”（cipher text）
>
> 使用密钥还原明文的过程叫“解密”（decrypt），是加密的反操作
>
> 加密解密的操作过程就是“加密算法”。



加密：分为**对称加密和非对称加密**



1. #### 对称加密

   加密和解密时使用的密钥都是同一个，是“对称”的

   - 只要保证了密钥的安全，那整个通信过程就可以说具有了机密性。
   - 对称加密算法： RC4、DES、3DES、AES、ChaCha20 等
     - RC4、DES、3DES，不安全，禁止使用了
     - TLS1.3只保留了AES、ChaCha20
     - AES：高级加密标准，DES算法替代者，安全强度很高，性能很好，是应用最广泛的对称加密算法
   - 加密分组模式
     - 让算法用固定长度的密钥加密任意长度的明文，把小秘密（即密钥）转化为大秘密（即密文）

   > AES128-GCM：
   >
   >  密钥长度为 128 位的 AES 算法，使用的分组模式是 GCM；
   >
   > ChaCha20-Poly1305 
   >
   > ChaCha20 算法，使用的分组模式是 Poly1305

   **对称加密的问题：如何把密钥安全地传递给对方——密钥交换**



2. #### 非对称加密

   **公钥**：可以公开给任何人使用

   **私钥：**必须严格保密

   单向性：公钥加密后只能用私钥解密，私钥加密后只能用公钥解密

   - 类型：DH、DSA、RSA、ECC
     - RSA：其中最著名的一个，几乎可以说是非对称加密的代名词，它的安全性基于“整数分解”的数学难题，使用两个超大素数的乘积作为生成密钥的材料，想要从公钥推算出私钥是非常困难的。
     - ECC：是非对称加密里的“后起之秀”，它基于“椭圆曲线离散对数”的数学难题，使用特定的曲线方程和基点生成公钥和私钥

   **问题：虽然非对称加密没有“密钥交换”的问题，但因为它们都是基于复杂的数学难题，运算速度很慢，即使是 ECC 也要比 AES 差上好几个数量级**

   

3. #### 混合加密

   TLS：

   1. 在通信刚开始的时候使用非对称算法，比如 RSA、ECDHE，首先解决密钥交换的问题
   2. 然后用随机数产生对称算法使用的“会话密钥”（session key），再用公钥加密
   3. 对方拿到密文后用私钥解密，取出会话密钥。这样，双方就实现了对称密钥的安全交换，后续就不再使用非对称加密，全都使用对称加密。



​	不过这只是“万里长征的第一步”，后面还有完整性、身份认证、不可否认等特性没有实现，所以现在的通信还不是绝对安全



### 总结

1. 加密算法的核心思想是“把一个小秘密（密钥）转化为一个大秘密（密文消息）”，守住了小秘密，也就守住了大秘密；
2. 对称加密只使用一个密钥，运算速度快，密钥必须保密，无法做到安全的密钥交换，常用的有 AES 和 ChaCha20；
3. 非对称加密使用两个密钥：公钥和私钥，公钥可以任意分发而私钥保密，解决了密钥交换问题但速度慢，常用的有 RSA 和 ECC；
4. 把对称加密和非对称加密结合起来就得到了“又好又快”的混合加密，也就是 TLS 里使用的加密方式。

















